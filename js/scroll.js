$(function(){var d=0;function e(t){$(t).velocity("stop").velocity("scroll",{duration:500,easing:"easeInOutQuart"})}function v(t){t.velocity("stop").velocity("transition.fadeIn",{duration:500,easing:"easeInQuart"})}$(".toc-child").hide(),$(window).scroll(throttle(function(t){var e,i,o,a,s,n,c=$(this).scrollTop();isMobile()||(e=c,i=$("#content-outer").height(),a=e/((o=$(window).height())<i?i-o:$(document).height()-o),n=100<(s=Math.round(100*a))?100:s,$(".progress-num").text(n),$(".sidebar-toc__progress-bar").velocity("stop").velocity({width:n+"%"},{duration:100,easing:"easeInOutQuart"}),function(e){if(0!==$(".toc-link").length){e<200&&($(".toc-link").removeClass("active"),$(".toc-child").hide());var t=$("#post-content").find("h1,h2,h3,h4,h5,h6"),i="";t.each(function(){var t=$(this);e>t.offset().top-25&&(i="#"+$(this).attr("id"))});var o,a=$(".toc-link.active");if(i&&a.attr("href")!==i){o=i,window.history.replaceState&&o!==window.location.hash&&window.history.replaceState(void 0,void 0,o),$(".toc-link").removeClass("active");var s=$('.toc-link[href="'+i+'"]');s.addClass("active");var n,c=s.parents(".toc-child");0<c.length?(0<(n=1<c.length?c.eq(c.length-1).find(".toc-child"):c).length&&n.is(":hidden")&&v(n),c.eq(c.length-1).closest(".toc-item").siblings(".toc-item").find(".toc-child").hide()):(s.closest(".toc-item").find(".toc-child").is(":hidden")&&v(s.closest(".toc-item").find(".toc-child")),s.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide())}}}(c));var l,h,r=(h=d<(l=c),d=l,h);56<c?(r?$("#page-header").hasClass("visible")?$("#page-header").removeClass("visible"):console.log():$("#page-header").hasClass("visible")?console.log():$("#page-header").addClass("visible"),$("#page-header").addClass("fixed"),"0"===$("#go-up").css("opacity")&&$("#go-up").velocity("stop").velocity({translateX:-30,rotateZ:360,opacity:1},{easing:"easeOutQuart",duration:200})):(0===c&&$("#page-header").removeClass("fixed").removeClass("visible"),$("#go-up").velocity("stop").velocity({translateX:0,rotateZ:180,opacity:0},{easing:"linear",duration:200}))},50,100)),$("#go-up").on("click",function(){$("body").velocity("stop").velocity("scroll",{duration:500,easing:"easeOutQuart"})}),$("#post-content").find("h1,h2,h3,h4,h5,h6").on("click",function(t){e("#"+$(this).attr("id"))}),$(".toc-link").on("click",function(t){t.preventDefault(),e($(this).attr("href"))})});